<html>
<head>

<title> Environment </title>

    <style>
    body{
      margin:0;
      padding:0;
    }

    canvas{
        background:black;
        margin:0;
        padding:0;
      }
    </style>

<script>

// begin javascript stuff
window.onload = function(){
// code stufffff

let canvas = document.getElementById('CodyEnvCanvas');
let canvasContext = canvas.getContext('2d');

canvas.addEventListener("mousemove", function(event){
  console.log(event.clientX, event.clientY);
  for(let i = 0; i<dotList.length; i++){
  dotList[i].cursorDist(event);
}
});

canvas.addEventListener("click", function(event){
  let clickedCircle = false;
  for(let i = 0; i<dotList.length; i++){
    if(dotList[i].checkIfClickIn(event)){
      // if a circle is clicked, perform action and exit loop
      console.log("clicked ", i, );
      clickedCircle = true;
      break;
    }
  if (!clickedCircle){
    //if the background was clicked, increase the aura of lit up circles
      auraMult+=0.5;
      if(auraMult >=3){
        auraMult=0.5;
      }
  }
}

});

// create circle array
let dotList = [];
const maxSize = 15;
const minSize = 10;
const b = 80;
const aura = 200;
let auraMult = 1;


for(let i = 0; i<8; i++){
  for(let j = 0; j<8; j++){
    dotList.push(new dot((i*b)+40, (j*b)+40, 15, "#FFFFFF"));
    //current i and j values, and x and y values assigned to new dots/circles
  }
}



  requestAnimationFrame(run);
  //clear canvas and update stuff (later...)
  function run(){
    canvasContext.clearRect(0, 0, canvas.width, canvas.height);

    requestAnimationFrame(run);
    for(let k = 0; k < dotList.length; k++){
      dotList[k].display();
      //dotList[k].cursorDist();
    }
  }

// building a circle
  function dot(x, y, r, c){
    // initialize
    this.xPos = x;
    this.yPos = y;
    this.radius = r;
    this.color = c;
    this.state = 0;
    // ... and display
    this.display = function(){
      canvasContext.fillStyle = this.color;
      canvasContext.beginPath();
      canvasContext.arc(this.xPos, this.yPos, this.radius, 0, Math.PI*2, true);
      canvasContext.fill();
      canvasContext.closePath();
    }
    this.update = function(){

    }
    this.cursorDist = function(event){
      let h = Math.hypot(event.clientX-this.xPos, event.clientY-this.yPos);
      let a = auraMult*aura;
      if(h<a/8){
        this.color = "#B9B9B9";
      }
      else if(h<a/4){
        this.color = "#939393";
      }
      else if(h<a/2){
        this.color = "#606060";
      }
      else if(h<(a*3)/4){
        this.color = "#373737";
      }
      else {
        this.color = "#1C1C1C";
      }
      console.log("AURAS ", aura, auraMult, a);
    }
    this.checkIfClickIn = function(event){
      if(Math.hypot(event.clientX-this.xPos, event.clientY-this.yPos)<this.radius){
        return true;
      }
      else{
        return false;
      }
      console.log(Math.hypot(event.clientX-this.xPos, event.clientY-this.yPos), this.radius);
    }
    this.clickIn = function(){
      this.state++;
      if (this.state>=2){
        this.state = 0;
      }

    }


}
}


// end javascript
</script>

</head>

<body>

  <canvas id = "CodyEnvCanvas" width="640" height="640">
  </canvas>

</body>
</html>
